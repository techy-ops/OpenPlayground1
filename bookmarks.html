<!DOCTYPE html>
<html lang="en" data-theme="light">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bookmarks - OpenPlayground</title>
    <link rel="icon" href="logo.jpg" type="image/x-icon">
    <link rel="icon" href="logo.jpg" type="image/png">
    <meta name="description" content="Your bookmarked projects from OpenPlayground">

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap"
        rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/remixicon@4.3.0/fonts/remixicon.css" rel="stylesheet">

    <!-- Styles -->
    <link rel="stylesheet" href="./css/responsive.css">
    <link rel="stylesheet" href="./css/style.css">
    <link rel="stylesheet" href="./css/bookmarks.css">
    <link rel="stylesheet" href="./css/footer.css">
</head>

<body>
    <!-- Apply saved theme immediately to prevent flash -->
    <script>
        (function () {
            const savedTheme = localStorage.getItem('theme') || 'light';
            document.documentElement.setAttribute('data-theme', savedTheme);
        })();
    </script>
    <!-- NAVBAR -->

    <nav class="navbar" id="navbar">
        <div class="nav-container">
            <a href="#" class="nav-logo">
                <i class="ri-code-box-fill" aria-hidden="true"></i>
                <span>OpenPlayground</span>
            </a>

            <div class="nav-links" id="navLinks">
                <a href="/index.html#projects" class="nav-link">Projects</a>
                <a href="/index.html#contribute" class="nav-link">Contribute</a>
                <a href="about.html" class="nav-link">About</a>
                <a href="bookmarks.html" class="nav-link">
                    <i class="ri-bookmark-line" aria-hidden="true"></i> Bookmarks
                </a>
                <a href="https://github.com/YadavAkhileshh/OpenPlayground" target="_blank" class="nav-link">
                    <i class="ri-github-fill" aria-hidden="true"></i> GitHub
                </a>

                <!-- Enhanced Theme Toggle -->
                <div class="theme-toggle-container">
                    <button class="theme-toggle" type="button" id="themeToggle" title="Toggle theme"
                        aria-label="Toggle theme">
                        <svg class="theme-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                            stroke-linecap="round" stroke-linejoin="round">
                            <mask id="moon-mask">
                                <rect x="0" y="0" width="100%" height="100%" fill="white" />
                                <circle class="moon-bite" cx="14" cy="9" r="14" fill="black" />
                            </mask>
                            <circle class="sun-core" cx="12" cy="12" r="7" fill="currentColor" mask="url(#moon-mask)" />
                            <g class="sun-rays" stroke="currentColor">
                                <line x1="12" y1="1" x2="12" y2="3" />
                                <line x1="12" y1="21" x2="12" y2="23" />
                                <line x1="4.22" y1="4.22" x2="5.64" y2="5.64" />
                                <line x1="18.36" y1="18.36" x2="19.78" y2="19.78" />
                                <line x1="1" y1="12" x2="3" y2="12" />
                                <line x1="21" y1="12" x2="23" y2="12" />
                                <line x1="4.22" y1="19.78" x2="5.64" y2="18.36" />
                                <line x1="18.36" y1="5.64" x2="19.78" y2="4.22" />
                            </g>
                        </svg>
                    </button>
                </div>

                <button class="nav-toggle" id="navToggle" aria-label="Toggle menu">
                    <i class="ri-menu-3-line" aria-hidden="true"></i>
                </button>
            </div>
    </nav>

    <!-- Bookmarks Section -->
    <section id="bookmarks" class="bookmarks-section">
        <div class="section-header">
            <span class="section-badge">Saved</span>
            <h2 class="section-title">Your <span class="gradient-text">Bookmarks</span></h2>
            <p class="section-subtitle">Projects you've saved for later</p>
        </div>

        <!-- Bookmarks Controls -->
        <div class="bookmarks-controls">
            <div class="bookmarks-info">
                <span id="bookmarks-count-text">0 bookmarked projects</span>
            </div>
            <button class="btn btn-secondary clear-bookmarks-btn" id="clear-all-bookmarks" style="display: none;">
                <i class="ri-delete-bin-line"></i> Clear All
            </button>
        </div>

        <!-- Bookmarks Grid -->
        <div class="bookmarks-container" id="bookmarks-container">
            <!-- Bookmarked projects will be rendered here -->
        </div>

        <!-- Empty State -->
        <div class="bookmarks-empty-state" id="bookmarks-empty-state" style="display: none;">
            <div class="empty-icon">
                <i class="ri-bookmark-line"></i>
            </div>
            <h3>No bookmarks yet</h3>
            <p>Start exploring projects and bookmark your favorites to find them here!</p>
            <a href="index.html#projects" class="btn btn-primary">
                <i class="ri-compass-line"></i> Explore Projects
            </a>
        </div>
    </section>

    <!-- Footer Component Placeholder -->
    <div id="footer-placeholder"></div>

    <!-- Scroll to Top Button -->
    <button id="scrollToTopBtn" class="scroll-top-btn" aria-label="Scroll to top">
        <i class="ri-arrow-up-line"></i>
    </button>

    <!-- Bookmarks Manager -->
    <script src="./js/bookmarks.js"></script>

    <!-- Component Loader -->
    <script src="./js/components.js"></script>

    <!-- Bookmarks Page Script -->
    <script src="./js/bookmarks-page.js"></script>
</body>

<script>
    // Theme toggle functionality
    (function () {
        const STORAGE_KEY = 'theme';
        let isInitialized = false;

        function getInitialTheme() {
            const savedTheme = localStorage.getItem(STORAGE_KEY);
            if (savedTheme) return savedTheme;

            return window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';
        }

        function setTheme(theme) {
            document.documentElement.setAttribute('data-theme', theme);
            localStorage.setItem(STORAGE_KEY, theme);

            const button = document.getElementById('themeToggle');
            if (button) {
                const newLabel = theme === 'light' ? 'Switch to dark mode' : 'Switch to light mode';
                button.setAttribute('aria-label', newLabel);
                button.setAttribute('title', newLabel);
            }
        }

        function toggleTheme(e) {
            e.preventDefault();
            e.stopPropagation();

            const currentTheme = document.documentElement.getAttribute('data-theme') || 'light';
            const newTheme = currentTheme === 'light' ? 'dark' : 'light';
            setTheme(newTheme);
        }

        // Initialize theme immediately (before DOM loads to prevent flash)
        const initialTheme = getInitialTheme();
        document.documentElement.setAttribute('data-theme', initialTheme);

        // Setup toggle button after DOM loads
        document.addEventListener('DOMContentLoaded', function () {
            if (isInitialized) return; // Prevent double initialization

            setTheme(initialTheme); // Ensure button labels are set

            const button = document.getElementById('themeToggle');
            if (button) {
                // Remove existing event listeners by replacing with a new reference
                button.removeEventListener('click', toggleTheme);
                button.addEventListener('click', toggleTheme, { once: false });
                isInitialized = true;
            }
        });

        // Listen for system theme changes
        window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', function (e) {
            if (!localStorage.getItem(STORAGE_KEY)) {
                setTheme(e.matches ? 'dark' : 'light');
            }
        });
    })();
</script>

</html>